"use strict";(globalThis["webpackChunklearnwithme_app"]=globalThis["webpackChunklearnwithme_app"]||[]).push([[448],{7448:(e,a,t)=>{t.r(a),t.d(a,{default:()=>E});var i=t(3673);const d={key:1,class:"q-pa-md row items-start q-gutter-md"},o={class:"q-pa-l"};function r(e,a,t,r,s,n){const l=(0,i.up)("q-circular-progress"),c=(0,i.up)("MediaCard"),m=(0,i.up)("MediaUploadButton"),u=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(u,null,{default:(0,i.w5)((()=>[e.isLoading?((0,i.wg)(),(0,i.j4)(l,{key:0,indeterminate:"",size:"90px",thickness:.2,color:"lime","center-color":"grey-8","track-color":"transparent",class:"q-ma-xl"},null,8,["thickness"])):((0,i.wg)(),(0,i.iD)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.media,(e=>((0,i.wg)(),(0,i.j4)(c,{key:e._id,media:e},null,8,["media"])))),128)),(0,i._)("div",o,[(0,i.Wm)(m,{mediaGroupId:e.mediaGroupId},null,8,["mediaGroupId"])])]))])),_:1})}var s=t(52),n=t.n(s),l=t(2471);const c=(0,i._)("div",{class:"text-h6"},"Medium",-1);function m(e,a,t,d,o,r){const s=(0,i.up)("q-btn"),n=(0,i.up)("q-card-section"),l=(0,i.up)("q-uploader"),m=(0,i.up)("q-card-actions"),u=(0,i.up)("q-card"),p=(0,i.up)("q-dialog"),h=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s,{color:"grey-4","text-color":"purple",glossy:"",unelevated:"",icon:"camera_enhance",label:"Upload",onClick:a[0]||(a[0]=a=>e.medium=!0)}),(0,i.Wm)(p,{modelValue:e.medium,"onUpdate:modelValue":a[1]||(a[1]=a=>e.medium=a)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[c])),_:1}),(0,i.Wm)(n,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{url:e.uploadURL,style:{"max-width":"300px"},headers:[{name:"Authorization",value:`Bearer ${e.access_token}`}],"field-name":e=>"file"},null,8,["url","headers","field-name"])])),_:1}),(0,i.Wm)(m,{align:"right",class:"bg-white text-teal"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(s,{flat:"",label:"OK"},null,512),[[h]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const u=(0,i.aZ)({name:"MediaUpladButton",props:{mediaGroupId:{type:String}},data(){return{medium:!1,uploadURL:`https://ec2-13-126-7-252.ap-south-1.compute.amazonaws.com:8080/api/${this.mediaGroupId}/media`,access_token:l.Z.get("access_token")}}});var p=t(4260),h=t(2165),g=t(6778),w=t(151),_=t(5589),f=t(845),k=t(9367),Z=t(677),y=t(7518),b=t.n(y);const q=(0,p.Z)(u,[["render",m]]),C=q;b()(u,"components",{QBtn:h.Z,QDialog:g.Z,QCard:w.Z,QCardSection:_.Z,QUploader:f.Z,QCardActions:k.Z}),b()(u,"directives",{ClosePopup:Z.Z});var v=t(2323);const Q={class:"text-h6"},W={class:"text-subtitle2"},x=(0,i._)("br",null,null,-1);function U(e,a,t,d,o,r){const s=(0,i.up)("q-img"),n=(0,i.up)("q-video"),l=(0,i.up)("q-card-section"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-card-actions"),u=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(u,{class:"my-card"},{default:(0,i.w5)((()=>[-1!==e.media.mimetype.search("image")?((0,i.wg)(),(0,i.j4)(s,{key:0,src:e.media._embedded,alt:e.media.originalname},null,8,["src","alt"])):-1!==e.media.mimetype.search("video")?((0,i.wg)(),(0,i.j4)(n,{key:1,src:e.media._embedded},null,8,["src"])):(0,i.kq)("",!0),(0,i.Wm)(l,null,{default:(0,i.w5)((()=>[(0,i._)("div",Q,(0,v.zw)(e.media.originalname),1),(0,i._)("div",W,(0,v.zw)(e.media._id),1)])),_:1}),(0,i.Wm)(l,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Premissions: "+(0,v.zw)(e.media.security.permissions),1),x])),_:1}),(0,i.Wm)(m,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{flat:"",color:"red",onClick:a[0]||(a[0]=a=>e.deleteMedia(e.media._id))},{default:(0,i.w5)((()=>[(0,i.Uk)("Delete")])),_:1}),(0,i.Wm)(c,{type:"a",href:e.media._embedded,flat:"",color:"purple"},{default:(0,i.w5)((()=>[(0,i.Uk)("Open")])),_:1},8,["href"]),(0,i.Wm)(c,{onClick:a[1]||(a[1]=a=>e.copyLink(e.media._embedded)),flat:"",color:"blue"},{default:(0,i.w5)((()=>[(0,i.Uk)("Copy Link")])),_:1})])),_:1})])),_:1})}var z=t(4434);const G=(0,i.aZ)({name:"MediaCardComponent",props:{media:{media:Object,required:!0}},data:function(){return{base_url:"https://ec2-13-126-7-252.ap-south-1.compute.amazonaws.com:8080",config:{headers:{Authorization:`Bearer ${l.Z.get("access_token")}`}}}},methods:{deleteMedia(e){n()["delete"](`${this.base_url}/api/media/${e}`,this.config).then((e=>{z.Z.create({message:"Successfully Deleted",color:"green"})})).catch((e=>{z.Z.create({message:e.message,color:"red"})}))},copyLink(e){const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),z.Z.create({message:"Copied",color:"blue"})}}});var M=t(1419),L=t(4152);const $=(0,p.Z)(G,[["render",U]]),B=$;b()(G,"components",{QCard:w.Z,QVideo:M.Z,QImg:L.Z,QCardSection:_.Z,QCardActions:k.Z,QBtn:h.Z});const D=(0,i.aZ)({name:"Media",components:{MediaUploadButton:C,MediaCard:B},data:function(){let e=[];return{media:e,mediaGroup:{},isLoading:!0,mediaGroupId:this.$route.params.id,fetch_url:`https://ec2-13-126-7-252.ap-south-1.compute.amazonaws.com:8080/api/${this.$route.params.id}/media?expand=mediaGroup`,base_url:"https://ec2-13-126-7-252.ap-south-1.compute.amazonaws.com:8080",config:{headers:{Authorization:`Bearer ${l.Z.get("access_token")}`}},isError:!1,error:""}},created(){this.getData()},methods:{getData(){n().get(this.fetch_url,this.config).then((e=>{let a=e.data.results;this.mediaGroup=e.data.mediaGroup,this.media=a,this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e.message}))},dismiss(){this.error="",this.isError=!1}}});var j=t(4379),I=t(6122);const A=(0,p.Z)(D,[["render",r]]),E=A;b()(D,"components",{QPage:j.Z,QCircularProgress:I.Z})}}]);