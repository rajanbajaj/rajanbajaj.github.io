"use strict";(self["webpackChunklearnwithme_app"]=self["webpackChunklearnwithme_app"]||[]).push([[175],{1175:(t,o,e)=>{e.r(o),e.d(o,{default:()=>q});var r=e(3673),s=e(2323);function i(t,o,e,i,a,n){const l=(0,r.up)("q-btn"),c=(0,r.up)("q-banner"),h=(0,r.up)("q-circular-progress"),u=(0,r.up)("PostShortComponent"),d=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(d,null,{default:(0,r.w5)((()=>[t.isError?((0,r.wg)(),(0,r.j4)(c,{key:0,dense:"",class:"bg-red text-white"},{action:(0,r.w5)((()=>[(0,r.Wm)(l,{flat:"",color:"white",label:"Dismiss",onClick:t.dismiss},null,8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Uk)((0,s.zw)(t.error)+" ",1)])),_:1})):(0,r.kq)("",!0),t.isLoading?((0,r.wg)(),(0,r.j4)(h,{key:1,indeterminate:"",size:"90px",thickness:.2,color:"lime","center-color":"grey-8","track-color":"transparent",class:"q-ma-xl"},null,8,["thickness"])):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.posts,(t=>((0,r.wg)(),(0,r.j4)(u,{post:t,key:t._id,class:"q-py-5"},null,8,["post"])))),128))])),_:1})}const a={class:"text-h6"},n={class:"text-subtitle2"},l=(0,r.Uk)("Visit Post");function c(t,o,e,i,c,h){const u=(0,r.up)("q-card-section"),d=(0,r.up)("q-separator"),k=(0,r.up)("q-btn"),p=(0,r.up)("q-card-actions"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,{class:"my-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r._)("div",a,(0,s.zw)(t.post.title),1),(0,r._)("div",n,(0,s.zw)(t.post.author),1)])),_:1}),(0,r.Wm)(u,{class:"q-pt-none","v-html":t.post.body},null,8,["v-html"]),(0,r.Wm)(d),(0,r.Wm)(p,{align:"right"},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{flat:"",round:"",color:t.likeColor,onClick:o[0]||(o[0]=o=>t.like(t.post._id)),icon:"favorite"},null,8,["color"]),(0,r.Wm)(k,{flat:"",round:"",color:t.bookmarkColor,onClick:o[1]||(o[1]=o=>t.bookmark(t.post._id)),icon:"bookmark"},null,8,["color"]),(0,r.Wm)(k,{flat:"",round:"",color:t.shareColor,onClick:o[2]||(o[2]=o=>t.share(t.post._id)),icon:"share"},null,8,["color"]),(0,r.Wm)(k,{type:"a",href:`/#posts/${t.post._id}`,flat:"",color:"purple"},{default:(0,r.w5)((()=>[l])),_:1},8,["href"])])),_:1})])),_:1})}var h=e(2471),u=e(52),d=e.n(u);const k=(0,r.aZ)({name:"PostShortComponent",props:{post:{type:Object,required:!0},icon:{type:String,default:"article"}},data(){return{likeColor:"default",bookmarkColor:"default",shareColor:"primary",fetch_url:`https://learndottogether.herokuapp.com/api/posts/${this.post._id}`,config:{headers:{Authorization:`Bearer ${h.Z.get("access_token")}`}},currentUserId:"",likes:0,bookmarks:0,isLikedByCurrentUser:0,isBookmarkedByCurrentUser:0}},mounted(){this.currentUserId=this.parseJwt(h.Z.get("access_token")).id,d().get(`${this.fetch_url}/likes/count`,this.config).then((t=>{this.likes=t.data})).catch((t=>console.log(t))),d().get(`${this.fetch_url}/likes/${this.currentUserId}/count`,this.config).then((t=>{this.isLikedByCurrentUser=t.data,this.isLikedByCurrentUser&&(this.likeColor="red")})).catch((t=>console.log(t))),d().get(`${this.fetch_url}/bookmarks/count`,this.config).then((t=>{this.bookmarks=t.data})).catch((t=>console.log(t))),d().get(`${this.fetch_url}/bookmarks/${this.currentUserId}/count`,this.config).then((t=>{this.isBookmarkedByCurrentUser=t.data,this.isBookmarkedByCurrentUser&&(this.bookmarkColor="accent")})).catch((t=>console.log(t)))},methods:{like(t){"default"===this.likeColor?this.likeColor="red":this.likeColor="default",d().post(`${this.fetch_url}/likes/${this.currentUserId}`,{data:""},this.config).then((t=>{d().get(`${this.fetch_url}/likes/${this.currentUserId}/count`,this.config).then((t=>{this.isLikedByCurrentUser=t.data,this.isLikedByCurrentUser&&(this.likeColor="red")})).catch((t=>console.log(t)))})).catch((t=>console.log(t)))},bookmark(t){"default"===this.bookmarkColor?this.bookmarkColor="accent":this.bookmarkColor="default",d().post(`${this.fetch_url}/bookmarks/${this.currentUserId}`,{data:""},this.config).then((t=>{d().get(`${this.fetch_url}/bookmarks/${this.currentUserId}/count`,this.config).then((t=>{this.isBookmarkedByCurrentUser=t.data,this.isBookmarkedByCurrentUser&&(this.bookmarkColor="accent")})).catch((t=>console.log(t)))})).catch((t=>console.log(t)))},share(t){},parseJwt(t){if(!t)return;const o=t.split(".")[1],e=o.replace("-","+").replace("_","/");return JSON.parse(window.atob(e))}}});var p=e(151),m=e(5589),g=e(5869),f=e(9367),C=e(2165),_=e(7518),b=e.n(_);k.render=c;const w=k;b()(k,"components",{QCard:p.Z,QCardSection:m.Z,QSeparator:g.Z,QCardActions:f.Z,QBtn:C.Z});const y=(0,r.aZ)({name:"Posts",components:{PostShortComponent:w},data:function(){let t=[];return{posts:t,isLoading:!0,fetch_url:"https://learndottogether.herokuapp.com/api/posts",config:{headers:{Authorization:`Bearer ${h.Z.get("access_token")}`}},isError:!1,error:""}},created(){this.getData()},methods:{getData(){d().get(this.fetch_url,this.config).then((t=>{let o=t.data.results;this.posts=o,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.isError=!0,this.error=t.message}))},dismiss(){this.error="",this.isError=!1}}});var B=e(4379),U=e(5607),$=e(6122);y.render=i;const q=y;b()(y,"components",{QPage:B.Z,QBanner:U.Z,QBtn:C.Z,QCircularProgress:$.Z})}}]);
