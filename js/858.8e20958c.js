"use strict";(self["webpackChunklearnwithme_app"]=self["webpackChunklearnwithme_app"]||[]).push([[858],{3999:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var d=t(3673);const i={key:1,class:"q-pa-md row items-start q-gutter-md"},r={class:"q-pa-l"};function o(e,a,t,o,l,s){const n=(0,d.up)("q-circular-progress"),c=(0,d.up)("MediaCard"),u=(0,d.up)("MediaUploadButton"),m=(0,d.up)("q-page");return(0,d.wg)(),(0,d.j4)(m,null,{default:(0,d.w5)((()=>[e.isLoading?((0,d.wg)(),(0,d.j4)(n,{key:0,indeterminate:"",size:"90px",thickness:.2,color:"lime","center-color":"grey-8","track-color":"transparent",class:"q-ma-xl"},null,8,["thickness"])):((0,d.wg)(),(0,d.iD)("div",i,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(e.media,(e=>((0,d.wg)(),(0,d.j4)(c,{key:e._id,media:e},null,8,["media"])))),128)),(0,d._)("div",r,[(0,d.Wm)(u,{mediaGroupId:e.mediaGroupId},null,8,["mediaGroupId"])])]))])),_:1})}var l=t(52),s=t.n(l),n=t(2471);const c=(0,d._)("div",{class:"text-h6"},"Medium",-1);function u(e,a,t,i,r,o){const l=(0,d.up)("q-btn"),s=(0,d.up)("q-card-section"),n=(0,d.up)("q-uploader"),u=(0,d.up)("q-card-actions"),m=(0,d.up)("q-card"),p=(0,d.up)("q-dialog"),h=(0,d.Q2)("close-popup");return(0,d.wg)(),(0,d.iD)("div",null,[(0,d.Wm)(l,{color:"grey-4","text-color":"purple",glossy:"",unelevated:"",icon:"camera_enhance",label:"Upload",onClick:a[0]||(a[0]=a=>e.medium=!0)}),(0,d.Wm)(p,{modelValue:e.medium,"onUpdate:modelValue":a[1]||(a[1]=a=>e.medium=a)},{default:(0,d.w5)((()=>[(0,d.Wm)(m,{style:{width:"700px","max-width":"80vw"}},{default:(0,d.w5)((()=>[(0,d.Wm)(s,null,{default:(0,d.w5)((()=>[c])),_:1}),(0,d.Wm)(s,{class:"q-pt-none"},{default:(0,d.w5)((()=>[(0,d.Wm)(n,{url:e.uploadURL,style:{"max-width":"300px"},headers:[{name:"Authorization",value:`Bearer ${e.access_token}`}],"field-name":e=>"file"},null,8,["url","headers","field-name"])])),_:1}),(0,d.Wm)(u,{align:"right",class:"bg-white text-teal"},{default:(0,d.w5)((()=>[(0,d.wy)((0,d.Wm)(l,{flat:"",label:"OK"},null,512),[[h]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const m=(0,d.aZ)({name:"MediaUpladButton",props:{mediaGroupId:{type:String}},data(){return{medium:!1,uploadURL:`http://localhost:3000/api/${this.mediaGroupId}/media`,access_token:n.Z.get("access_token")}}});var p=t(2165),h=t(6778),g=t(151),_=t(5589),f=t(7833),w=t(9367),k=t(677),y=t(7518),Z=t.n(y);m.render=u;const q=m;Z()(m,"components",{QBtn:p.Z,QDialog:h.Z,QCard:g.Z,QCardSection:_.Z,QUploader:f.Z,QCardActions:w.Z}),Z()(m,"directives",{ClosePopup:k.Z});var C=t(2323);const b={class:"text-h6"},v={class:"text-subtitle2"},Q=(0,d._)("br",null,null,-1),W=(0,d.Uk)("Delete"),x=(0,d.Uk)("Open"),U=(0,d.Uk)("Copy Link");function G(e,a,t,i,r,o){const l=(0,d.up)("q-img"),s=(0,d.up)("q-video"),n=(0,d.up)("q-card-section"),c=(0,d.up)("q-btn"),u=(0,d.up)("q-card-actions"),m=(0,d.up)("q-card");return(0,d.wg)(),(0,d.j4)(m,{class:"my-card"},{default:(0,d.w5)((()=>[-1!==e.media.mimetype.search("image")?((0,d.wg)(),(0,d.j4)(l,{key:0,src:e.media._embedded,alt:e.media.originalname},null,8,["src","alt"])):-1!==e.media.mimetype.search("video")?((0,d.wg)(),(0,d.j4)(s,{key:1,src:e.media._embedded},null,8,["src"])):(0,d.kq)("",!0),(0,d.Wm)(n,null,{default:(0,d.w5)((()=>[(0,d._)("div",b,(0,C.zw)(e.media.originalname),1),(0,d._)("div",v,(0,C.zw)(e.media._id),1)])),_:1}),(0,d.Wm)(n,{class:"q-pt-none"},{default:(0,d.w5)((()=>[(0,d.Uk)(" Premissions: "+(0,C.zw)(e.media.security.permissions),1),Q])),_:1}),(0,d.Wm)(u,{align:"right"},{default:(0,d.w5)((()=>[(0,d.Wm)(c,{flat:"",color:"red",onClick:a[0]||(a[0]=a=>e.deleteMedia(e.media._id))},{default:(0,d.w5)((()=>[W])),_:1}),(0,d.Wm)(c,{type:"a",href:e.media._embedded,flat:"",color:"purple"},{default:(0,d.w5)((()=>[x])),_:1},8,["href"]),(0,d.Wm)(c,{onClick:a[1]||(a[1]=a=>e.copyLink(e.media._embedded)),flat:"",color:"blue"},{default:(0,d.w5)((()=>[U])),_:1})])),_:1})])),_:1})}var M=t(4434);const L=(0,d.aZ)({name:"MediaCardComponent",props:{media:{media:Object,required:!0}},data:function(){return{base_url:"http://localhost:3000",config:{headers:{Authorization:`Bearer ${n.Z.get("access_token")}`}}}},methods:{deleteMedia(e){s()["delete"](`${this.base_url}/api/media/${e}`,this.config).then((e=>{M.Z.create({message:"Successfully Deleted",color:"green"})})).catch((e=>{M.Z.create({message:e.message,color:"red"})}))},copyLink(e){const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),M.Z.create({message:"Copied",color:"blue"})}}});var $=t(1419),B=t(4152);L.render=G;const D=L;Z()(L,"components",{QCard:g.Z,QVideo:$.Z,QImg:B.Z,QCardSection:_.Z,QCardActions:w.Z,QBtn:p.Z});const j=(0,d.aZ)({name:"Media",components:{MediaUploadButton:q,MediaCard:D},data:function(){let e=[];return{media:e,mediaGroup:{},isLoading:!0,mediaGroupId:this.$route.params.id,fetch_url:`http://localhost:3000/api/${this.$route.params.id}/media?expand=mediaGroup`,base_url:"http://localhost:3000",config:{headers:{Authorization:`Bearer ${n.Z.get("access_token")}`}},isError:!1,error:""}},created(){this.getData()},methods:{getData(){s().get(this.fetch_url,this.config).then((e=>{let a=e.data.results;this.mediaGroup=e.data.mediaGroup,this.media=a,this.isLoading=!1})).catch((e=>{this.isLoading=!1,this.isError=!0,this.error=e.message}))},dismiss(){this.error="",this.isError=!1}}});var z=t(4379),I=t(6122);j.render=o;const A=j;Z()(j,"components",{QPage:z.Z,QCircularProgress:I.Z})}}]);