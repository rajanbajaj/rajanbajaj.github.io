"use strict";(self["webpackChunklearnwithme_app"]=self["webpackChunklearnwithme_app"]||[]).push([[363],{4930:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(3673);function a(e,t,i,a,s,l){const n=(0,o.up)("q-card-section"),d=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(d,{class:"my-card"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{innerHTML:this.content},null,8,["innerHTML"])])),_:1})}const s=(0,o.aZ)({name:"ContentPreviewComponent",props:{content:{type:String,default:""}}});var l=i(151),n=i(5589),d=i(7518),r=i.n(d);s.render=a;const u=s;r()(s,"components",{QCard:l.Z,QCardSection:n.Z})},2363:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var o=i(3673);const a={class:"q-pa-md"};function s(e,t,i,s,l,n){const d=(0,o.up)("q-input"),r=(0,o.up)("q-select"),u=(0,o.up)("q-editor"),c=(0,o.up)("q-btn"),p=(0,o.up)("q-form"),m=(0,o.up)("ContentPreviewComponent"),h=(0,o.up)("q-dialog"),b=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(b,null,{default:(0,o.w5)((()=>[(0,o._)("div",a,[(0,o.Wm)(p,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{filled:"",modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=t=>e.title=t),label:"Post Title *"},null,8,["modelValue"]),(0,o.Wm)(r,{filled:"",modelValue:e.post_visibility,"onUpdate:modelValue":t[1]||(t[1]=t=>e.post_visibility=t),options:e.visibilityOptions,label:"Status","map-options":"","emit-value":""},null,8,["modelValue","options"]),(0,o.Wm)(r,{label:"Tags",filled:"",modelValue:e.tags,"onUpdate:modelValue":t[2]||(t[2]=t=>e.tags=t),"use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",style:{width:"250px"}},null,8,["modelValue"]),(0,o.Wm)(u,{modelValue:e.body,"onUpdate:modelValue":t[3]||(t[3]=t=>e.body=t),dense:e.$q.screen.lt.lg,toolbar:[["save","media"],[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["hr","link","custom_btn"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource","fullscreen"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"},definitions:{media:{tip:"Add media",icon:"photo",label:"Media",fixedLabel:!0,fixedIcon:!0,handler:e.addMedia}}},null,8,["modelValue","dense","toolbar","definitions"]),(0,o._)("div",null,[(0,o.Wm)(c,{label:"Submit",type:"submit",color:"primary"}),(0,o.Wm)(c,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"]),(0,o.Wm)(h,{modelValue:e.medium,"onUpdate:modelValue":t[4]||(t[4]=t=>e.medium=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{content:e.body},null,8,["content"])])),_:1},8,["modelValue"])])])),_:1})}var l=i(52),n=i.n(l),d=i(1959),r=i(2471),u=i(4434),c=i(4930);const p=(0,o.aZ)({name:"Edit Post",components:{ContentPreviewComponent:c.Z},setup(){return{title:(0,d.iH)(""),post_visibility:(0,d.iH)(""),body:(0,d.iH)(""),author:(0,d.iH)("")}},data(){let e="";return{success:!1,post:{},isLoading:!1,accessToken:"",tags:e,visibilityOptions:[{label:"PRIVATE (Visibility: Self)",value:"PRIVATE",description:"Visibility: Self"},{label:"PUBLIC (Visibility: All users)",value:"PUBLIC",description:"Visibility: All users"},{label:"PUBLIC_RESTRICTED (Visibility: Logged in users)",value:"PUBLIC_RESTRICTED",description:"Visibility: Logged in users"}],config:{headers:{Authorization:`Bearer ${r.Z.get("access_token")}`}},fetch_url:`https://learndottogether.herokuapp.com/api/posts/${this.$route.params.id}`,medium:!1}},created(){this.getData()},methods:{getData(){n().get(this.fetch_url,this.config).then((e=>{this.post=e.data,this.title=e.data.title,this.body=e.data.body,this.tags=e.data.tags,this.post_visibility=e.data.publish_status,this.isLoading=!1,this.success=!0})).catch((e=>{this.isLoading=!1,u.Z.create({message:e.message,color:"red"})}))},onSubmit(){let e={publish_status:this.post_visibility,body:this.body,title:this.title,tags:this.tags.toString(),author:this.parseJwt(r.Z.get("access_token")).id};n().put(this.fetch_url,e,this.config).then((e=>{u.Z.create({message:"Successfully Updated",color:"green"})})).catch((e=>{u.Z.create({message:e.message,color:"red"})}))},addMedia(){this.medium=!0},onReset(){this.post_visibility="",this.title="",this.tags="",this.author=""},parseJwt(e){if(!e)return;const t=e.split(".")[1],i=t.replace("-","+").replace("_","/");return JSON.parse(window.atob(i))}}});var m=i(4379),h=i(8689),b=i(4842),g=i(9396),f=i(9991),_=i(2165),y=i(6778),v=i(7518),w=i.n(v);p.render=s;const S=p;w()(p,"components",{QPage:m.Z,QForm:h.Z,QInput:b.Z,QSelect:g.Z,QEditor:f.Z,QBtn:_.Z,QDialog:y.Z})}}]);